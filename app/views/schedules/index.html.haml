%h2 スケジュール登録
.row
  .col.s12
    = link_to new_schedule_path(:action_type => Schedule.action_types.keys[0]), class: 'go_out-btn', remote: false, method: :get do
      %i.material-icons.left> flight_takeoff
      外出

    = link_to new_schedule_path(:action_type => Schedule.action_types.keys[1]), class: 'meeting-btn', remote: false, method: :get do
      %i.material-icons.left> people
      会議

    = link_to new_schedule_path(:action_type => Schedule.action_types.keys[2]), class: 'vacation-btn', remote: false, method: :get do
      %i.material-icons.left> hotel
      休暇

    = link_to new_schedule_path(:action_type => Schedule.action_types.keys[3]), class: 'early_leaving-btn', remote: false, method: :get do
      %i.material-icons.left> directions_run
      早退

%hr
%h2 #{current_user.group.name}メンバーの今日のスケジュール
%table
  %thead
    %tr
      %th{:width => "15%"} 行動
      %th{:width => "10%"} メンバー名
      %th{:width => "50%"} 概要
      %th{:width => "15%"} 終了時間
      %th{:width => "10%"}

  %tbody
    - @schedules.each do |schedule|
      %tr
        %td= type_to_button(schedule)
        %td= User.find(schedule.user_id).username
        %td= schedule.content
        %td= schedule.format_time
        %td= link_to '削除', schedule, method: :delete, data: { confirm: '削除しますか?' }

%br
%script{:src => "https://www.gstatic.com/charts/loader.js", :type => "text/javascript"}
:javascript
  google.charts.load("current", {packages:["timeline"], 'language': 'ja'});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var container = document.getElementById('example3.1');
    var chart = new google.visualization.Timeline(container);
    var dataTable = new google.visualization.DataTable();
    dataTable.addColumn({ type: 'string', id: 'Position' });
    dataTable.addColumn({ type: 'string', id: 'Name' });
    dataTable.addColumn({ type: 'date', id: 'Start' });
    for (arr of gon.arr_for_chart) {
      arr[2] = new Date(arr[2]);
      arr[3] = new Date(arr[3]);
    }
    dataTable.addColumn({ type: 'date', id: 'End' });
    dataTable.addRows(
      gon.arr_for_chart
    );
    var options = {
      timeline: { singleColor: '#808080' },
    };
    chart.draw(dataTable, options);
  }
%div{:id => "example3.1"}
